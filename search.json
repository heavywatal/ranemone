[{"path":"https://heavywatal.github.io/ranemone/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 ranemone authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://heavywatal.github.io/ranemone/articles/ranemone.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"ranemone","text":"can install development version GitHub: Use command time time update package.","code":"# install.packages(\"pak\") pak::pak(\"heavywatal/ranemone\")"},{"path":"https://heavywatal.github.io/ranemone/articles/ranemone.html","id":"usage","dir":"Articles","previous_headings":"","what":"Usage","title":"ranemone","text":"","code":"library(ranemone)"},{"path":"https://heavywatal.github.io/ranemone/articles/ranemone.html","id":"download-data","dir":"Articles","previous_headings":"","what":"Download data","title":"ranemone","text":"ranemone provides function download data files recursively ANEMONE DB way instructed website. Use ranemone.directory_prefix option specify existing data tree new destination downloading. Authentication requires username temporary password generated ANEMONE DB. command tries overwrite existing files.","code":"options(ranemone.directory_prefix = \"~/db\") ranemone::directory_prefix() options(ranemone.user = \"your-username\") options(ranemone.password = \"generated-password\") # not yours  ranemone::wget_recursive(\"dist/MiFish/ANEMONE/\")"},{"path":"https://heavywatal.github.io/ranemone/articles/ranemone.html","id":"read-files","dir":"Articles","previous_headings":"","what":"Read files","title":"ranemone","text":"ANEMONE DB consists many small files. can take time list read . package provides caching mechanism speed process repeated use. can check change cache directory follows: Read files given file name recursively directory_prefix(). results cached cache_dir(), makes subsequent calls faster.","code":"ranemone::cache_dir() options(ranemone.cache_dir = \"~/.cache/ranemone\") ranemone::cache_dir() sample_df = ranemone::read_tsv_xz(\"sample.tsv.xz\") experiment_df = ranemone::read_tsv_xz(\"experiment.tsv.xz\") community_df = ranemone::read_tsv_xz(\"community_qc3nn_target.tsv.xz\") fs::dir_ls(ranemone::cache_dir())"},{"path":"https://heavywatal.github.io/ranemone/articles/summarize.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Summarizing data","text":"Load packages. tidyverse collection useful packages data science. Set options data cache directories. See Get started page details.","code":"# install.packages(\"pak\") # pak::pak(\"tidyverse\") library(conflicted) # for safety library(tidyverse) library(ranemone) options(ranemone.directory_prefix = \"~/db\") options(ranemone.cache_dir = \"~/.cache/ranemone\")"},{"path":"https://heavywatal.github.io/ranemone/articles/summarize.html","id":"reading-files","dir":"Articles","previous_headings":"","what":"Reading files","title":"Summarizing data","text":"Read files given file name recursively directory_prefix().","code":"sample_df = ranemone::read_tsv_xz(\"sample.tsv.xz\") experiment_df = ranemone::read_tsv_xz(\"experiment.tsv.xz\") community_df = ranemone::read_tsv_xz(\"community_qc3nn_target.tsv.xz\")"},{"path":"https://heavywatal.github.io/ranemone/articles/summarize.html","id":"using-community-tables","dir":"Articles","previous_headings":"","what":"Using community tables","title":"Summarizing data","text":"community table contains many columns. may want select smaller number columns analysis. Alpha diversity can calculated using ncopiesperml column aggregating species sample. can replace species genus, family, levels needed.","code":"dim(community_df) str(community_df)  comm = community_df |>   dplyr::select(samplename, family, genus, species, sequence, nreads, ncopiesperml)  dim(comm) str(comm) print(comm) species_df = community_df |>   ranemone::summarize_ncopies(.by = species)  dim(species_df) str(species_df) print(species_df)  ranemone::summarize_alpha_diversity(species_df)"},{"path":"https://heavywatal.github.io/ranemone/articles/summarize.html","id":"making-community-composition-tables","dir":"Articles","previous_headings":"","what":"Making community composition tables","title":"Summarizing data","text":"community composition matrix wider format also supported.","code":"species_mat = community_df |>   ranemone::pivot_wider_ncopies(.by = species)  ranemone::calc_alpha_div(species_mat)"},{"path":"https://heavywatal.github.io/ranemone/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Watal M. Iwasaki. Author, maintainer.","code":""},{"path":"https://heavywatal.github.io/ranemone/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Iwasaki W (2026). ranemone: R Interface ANEMONE DB. R package version 0.0.0.9000, https://github.com/heavywatal/ranemone.","code":"@Manual{,   title = {ranemone: R Interface to ANEMONE DB},   author = {Watal M. Iwasaki},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/heavywatal/ranemone}, }"},{"path":"https://heavywatal.github.io/ranemone/index.html","id":"ranemone","dir":"","previous_headings":"","what":"R Interface to ANEMONE DB","title":"R Interface to ANEMONE DB","text":"ranemone R interface ANEMONE DB, database biodiversity surveys based environmental DNA metabarcoding. managed Dr. Michio Kondoh, Ecological Integration Lab. Tohoku University. package provides utility analyze data ANEMONE DB.","code":""},{"path":"https://heavywatal.github.io/ranemone/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"R Interface to ANEMONE DB","text":"can install development version GitHub: See “Get started” downloading data ANEMONE DB reading R.","code":"# install.packages(\"pak\") pak::pak(\"heavywatal/ranemone\")"},{"path":"https://heavywatal.github.io/ranemone/reference/aggregate.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize community data by species, genus, family, etc. — summarize_ncopies","title":"Summarize community data by species, genus, family, etc. — summarize_ncopies","text":"ncopiesperml summed sample. Species whose names contain \"unidentified\" removed default.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/aggregate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize community data by species, genus, family, etc. — summarize_ncopies","text":"","code":"summarize_ncopies(community_df, .by = .data$species, rm_unidentified = TRUE)  pivot_wider_ncopies(community_df, .by = .data$species, rm_unidentified = TRUE)"},{"path":"https://heavywatal.github.io/ranemone/reference/aggregate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize community data by species, genus, family, etc. — summarize_ncopies","text":"community_df community data frame, e.g., output ranemone::read_tsv_xz(\"community_qc3nn_target.tsv.xz\"). .Columns summarize, e.g., species, genus, /family. rm_unidentified logical value indicating whether remove \"unidentified\" species.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/aggregate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize community data by species, genus, family, etc. — summarize_ncopies","text":"summarize_ncopies() returns data frame longer format. pivot_wider_ncopies() returns community composition matrix wider format (samples x species).","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/aggregate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarize community data by species, genus, family, etc. — summarize_ncopies","text":"","code":"if (FALSE) { # \\dontrun{ community_df = ranemone::read_tsv_xz(\"community_qc3nn_target.tsv.xz\") species_df = ranemone::summarize_ncopies(community_df, .by = species) genus_df = ranemone::summarize_ncopies(community_df, .by = genus, rm_unidentified = FALSE)  species_mat = ranemone::pivot_wider_ncopies(community_df, .by = species) family_mat = ranemone::pivot_wider_ncopies(community_df, .by = family, rm_unidentified = FALSE) } # }"},{"path":"https://heavywatal.github.io/ranemone/reference/cache-dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Utilities for caching — cache_dir","title":"Utilities for caching — cache_dir","text":"expensive operations cached avoid recomputing . Intermediate results stored cache directory. Users can set via ranemone.cache_dir option. default set tools::R_user_dir(), persists across R sessions.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/cache-dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Utilities for caching — cache_dir","text":"","code":"cache_dir()"},{"path":"https://heavywatal.github.io/ranemone/reference/cache-dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Utilities for caching — cache_dir","text":"cache_dir() returns path cache directory.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/cache-dir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Utilities for caching — cache_dir","text":"General recommendation set persistent directory easy access, ~/.cache/ranemone, temporary directory like tempdir(). Setting NA FALSE make new temporary directory time cache_dir() called, virtually disables caching (recommended). can share cache directory users machine setting common directory, /tmp/ranemone-cache.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/cache-dir.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Utilities for caching — cache_dir","text":"","code":"old = options(ranemone.cache_dir = \"~/.cache/ranemone-example\")  ranemone::cache_dir() #> ~/.cache/ranemone-example  if (FALSE) { # \\dontrun{ # Calculate the size fs::dir_info(ranemone::cache_dir(), recurse = TRUE)$size |> sum() } # }  options(old) # reset for this example, not needed in real use"},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate alpha diversity indices — summarize_alpha_diversity","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"Alpha diversity indices calculated using ncopiesperml proxy abundances.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"","code":"summarize_alpha_diversity(species_df, .by = .data$samplename, .groups = NULL)  calc_alpha_div(mat)"},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"species_df data frame summarized species, e.g., output summarize_ncopies(). .Passed dplyr::summarize(). .groups Passed dplyr::summarize(). mat community composition matrix (samples x species), e.g., output pivot_wider_ncopies().","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"data frame alpha diversity indices.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"output two functions equivalent given input. summarize_alpha_diversity() operates tidyverse style longer data frames, calc_alpha_div() operates community composition matrix wider format using vegan package.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/diversity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate alpha diversity indices — summarize_alpha_diversity","text":"","code":"if (FALSE) { # \\dontrun{ species_df = ranemone::summarize_ncopies(community_df, .by = species) res1 = ranemone::summarize_alpha_diversity(species_df)  species_mat = ranemone::pivot_wider_ncopies(community_df, .by = species) res2 = ranemone::calc_alpha_div(species_mat)  stopifnot(all.equal(res1, res2)) } # }"},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":null,"dir":"Reference","previous_headings":"","what":"Download data from ANEMONE DB — wget_recursive","title":"Download data from ANEMONE DB — wget_recursive","text":"wget used download data files recursively ANEMONE DB. user name temporary password generated website required.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download data from ANEMONE DB — wget_recursive","text":"","code":"wget_recursive(   rel_url = \"dist/\",   opts = c(\"--reject=.fastq.xz,.png\", \"--no-verbose\"),   ...,   user = getOption(\"ranemone.user\"),   password = getOption(\"ranemone.password\") )"},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download data from ANEMONE DB — wget_recursive","text":"rel_url relative URL server root. directory given, end slash / ---parent work expected. opts Additional options passed wget. --recursive --level=0 ---parent --continue preset. --directory-prefix set directory_prefix(). --http-user --http-password set user password arguments, respectively. Currently -N/--timestamping work server: \"Last-modified header missing – time-stamps turned .\" ... Additional arguments passed base::system2(). user ANEMONE DB user name. Setting via options(ranemone.user = \"_\") easier repeated use. password \"Data Download Password\" generated \"Member Menu > Settings > Data Download\" page, login password. Setting via options(ranemone.password = \"_\") easier repeated use.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download data from ANEMONE DB — wget_recursive","text":"return value base::system2().","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download data from ANEMONE DB — wget_recursive","text":"directory tree starting db.anemone.bio/ created directory_prefix() according default behavior wget -r, assumed functions package.","code":""},{"path":[]},{"path":"https://heavywatal.github.io/ranemone/reference/download.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download data from ANEMONE DB — wget_recursive","text":"","code":"if (FALSE) { # \\dontrun{ options(ranemone.directory_prefix = \"prefix/path/to/data\") options(ranemone.user = \"your-username\") options(ranemone.password = \"generated-password\") # not yours  ranemone::wget_recursive(\"dist/MiFish/ANEMONE/2023KibanS/2023KibanSRUN01/\")  fs::dir_ls(directory_prefix()) # \"db.anemone.bio\" } # }"},{"path":"https://heavywatal.github.io/ranemone/reference/path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","title":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","text":"directory_prefix() reads ranemone.directory_prefix option set users, used downloading reading files. persistent directory easy access, ~/db, temporary directory like tempdir().","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","text":"","code":"directory_prefix()"},{"path":"https://heavywatal.github.io/ranemone/reference/path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","text":"path read option.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/path.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","text":"set, falls back extdata/directory_prefix package installation directory, mainly testing examples.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/path.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the prefix path to the ANEMONE DB data directory. — directory_prefix","text":"","code":"old = options(ranemone.directory_prefix = \"prefix/path/to/data\")  ranemone::directory_prefix() #> prefix/path/to/data  options(old) # reset for this example, not needed in real use"},{"path":"https://heavywatal.github.io/ranemone/reference/ranemone-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ranemone: R Interface to ANEMONE DB — ranemone-package","title":"ranemone: R Interface to ANEMONE DB — ranemone-package","text":"ANEMONE DB database biodiversity surveys based environmental DNA metabarcoding. managed Dr. Michio Kondoh, Ecological Integration Lab. Tohoku University. package provides utility analyze data ANEMONE DB.","code":""},{"path":[]},{"path":"https://heavywatal.github.io/ranemone/reference/ranemone-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ranemone: R Interface to ANEMONE DB — ranemone-package","text":"Maintainer: Watal M. Iwasaki heavywatal@gmail.com (ORCID)","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/read.html","id":null,"dir":"Reference","previous_headings":"","what":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","title":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","text":"ANEMONE DB contains large collection small tables, package provides efficient ways read process . may take run first time, subsequent runs quick results cached.","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","text":"","code":"read_tsv_xz(filename, compress = NULL, ..., limit = 250L, force = FALSE)"},{"path":"https://heavywatal.github.io/ranemone/reference/read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","text":"filename filename read. Files searched recursively path returned directory_prefix(). one following: community_qc3nn_target.tsv.xz community_qc_target.tsv.xz community_standard.tsv.xz experiment.tsv.xz sample.tsv.xz compress Compression method use: \"gz\", \"bz2\", \"xz\" \"\". NULL (default), one input file used. ... Additional arguments passed readr::read_tsv(). limit Maximum number files read . force Set TRUE ignore overwrite existing files cache_dir().","code":""},{"path":"https://heavywatal.github.io/ranemone/reference/read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","text":"concatenated data frame.","code":""},{"path":[]},{"path":"https://heavywatal.github.io/ranemone/reference/read.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read files recursively in the ANEMONE DB data directory. — read_tsv_xz","text":"","code":"if (FALSE) { # \\dontrun{ ranemone::read_tsv_xz(\"sample.tsv.xz\") ranemone::read_tsv_xz(\"experiment.tsv.xz\") ranemone::read_tsv_xz(\"community_qc3nn_target.tsv.xz\") } # }"}]
